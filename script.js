var QBS = [
    {
      "qb_name" : "Tom Brady",
      "sb_titles" : 3,
      "sb_appearances" : 5,
      "total_offense" : 47765,
      "turnovers" : 224,
      "reg_season_win_percentage" : 0.775,
      "wins" : 148,
      "total_regular_season_tds" : 373,
      "playoff_win_percentage" : 0.692,
      "total_playoff_games" : 24,
      "yards_per_game" : 258.7,
      "qb_rating" : 95.7,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "Joe Montana",
      "sb_titles" : 4,
      "sb_appearances" : 4,
      "total_offense" : 40132,
      "turnovers" : 192,
      "reg_season_win_percentage" : 0.713,
      "wins" : 117,
      "total_regular_season_tds" : 293,
      "playoff_win_percentage" : 0.696,
      "total_playoff_games" : 23,
      "yards_per_game" : 219.2,
      "qb_rating" : 92.3,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "Peyton Manning",
      "sb_titles" : 1,
      "sb_appearances" : 3,
      "total_offense" : 63921,
      "turnovers" : 289,
      "reg_season_win_percentage" : 0.696,
      "wins" : 167,
      "total_regular_season_tds" : 509,
      "playoff_win_percentage" : 0.478,
      "total_playoff_games" : 20,
      "yards_per_game" : 273.6,
      "qb_rating" : 97.2,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "Brett Favre",
      "sb_titles" : 1,
      "sb_appearances" : 2,
      "total_offense" : 70195,
      "turnovers" : 502,
      "reg_season_win_percentage" : 0.624,
      "wins" : 186,
      "total_regular_season_tds" : 522,
      "playoff_win_percentage" : 0.542,
      "total_playoff_games" : 24,
      "yards_per_game" : 244,
      "qb_rating" : 86,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "Steve Young",
      "sb_titles" : 1,
      "sb_appearances" : 1,
      "total_offense" : 35308,
      "turnovers" : 175,
      "reg_season_win_percentage" : 0.657,
      "wins" : 94,
      "total_regular_season_tds" : 275,
      "playoff_win_percentage" : 0.571,
      "total_playoff_games" : 14,
      "yards_per_game" : 221.1,
      "qb_rating" : 96.8,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "John Elway",
      "sb_titles" : 2,
      "sb_appearances" : 5,
      "total_offense" : 51097,
      "turnovers" : 363,
      "reg_season_win_percentage" : 0.643,
      "wins" : 148,
      "total_regular_season_tds" : 333,
      "playoff_win_percentage" : 0.667,
      "total_playoff_games" : 21,
      "yards_per_game" : 234.6,
      "qb_rating" : 79.9,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "Drew Brees",
      "sb_titles" : 1,
      "sb_appearances" : 1,
      "total_offense" : 49761,
      "turnovers" : 256,
      "reg_season_win_percentage" : 0.595,
      "wins" : 110,
      "total_regular_season_tds" : 375,
      "playoff_win_percentage" : 0.545,
      "total_playoff_games" : 11,
      "yards_per_game" : 277.9,
      "qb_rating" : 95.3,
      "total_mvp_awards" : null,
    },
    {
      "qb_name" : "Kurt Warner",
      "sb_titles" : 1,
      "sb_appearances" : 3,
      "total_offense" : 30961,
      "turnovers" : 230,
      "reg_season_win_percentage" : 0.578,
      "wins" : 67,
      "total_regular_season_tds" : 211,
      "playoff_win_percentage" : 0.692,
      "total_playoff_games" : 13,
      "yards_per_game" : 263.1,
      "qb_rating" : 93.7,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "Troy Aikman",
      "sb_titles" : 3,
      "sb_appearances" : 3,
      "total_offense" : 32210,
      "turnovers" : 199,
      "reg_season_win_percentage" : 0.57,
      "wins" : 94,
      "total_regular_season_tds" : 174,
      "playoff_win_percentage" : 0.733,
      "total_playoff_games" : 15,
      "yards_per_game" : 205.8,
      "qb_rating" : 81.6,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "Jim Kelly",
      "sb_titles" : 0,
      "sb_appearances" : 4,
      "total_offense" : 34089,
      "turnovers" : 351,
      "reg_season_win_percentage" : 0.631,
      "wins" : 101,
      "total_regular_season_tds" : 244,
      "playoff_win_percentage" : 0.529,
      "total_playoff_games" : 17,
      "yards_per_game" : 228.3,
      "qb_rating" : 84.4,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "Dan Marino",
      "sb_titles" : 0,
      "sb_appearances" : 1,
      "total_offense" : 59518,
      "turnovers" : 362,
      "reg_season_win_percentage" : 0.613,
      "wins" : 147,
      "total_regular_season_tds" : 429,
      "playoff_win_percentage" : 0.444,
      "total_playoff_games" : 18,
      "yards_per_game" : 253.6,
      "qb_rating" : 86.4,
      "total_mvp_awards" : null
    },
    {
      "qb_name" : "Warren Moon",
      "sb_titles" : 0,
      "sb_appearances" : 0,
      "total_offense" : 47646,
      "turnovers" : 294,
      "reg_season_win_percentage" : 0.502,
      "wins" : 102,
      "total_regular_season_tds" : 255,
      "playoff_win_percentage" : 0.3,
      "total_playoff_games" : 10,
      "yards_per_game" : 245.4,
      "qb_rating" : 80.9,
      "total_mvp_awards" : null
    },
]

var app = (function () {
  // private stuffs
  var qbs = [];
  var qb_index = 0;
  var ranked = false;
  var overall = {};
  var Qb = function (_arg) {
    this.qb_name = _arg.qb_name;
    this.sb_titles = {
      'value' : _arg.sb_titles,
      'ranking' : null
    };
    this.sb_appearances = {
      'value' : _arg.sb_appearances,
      'ranking' : null
    };
    this.total_offense = {
      'value' : _arg.total_offense,
      'ranking' : null
    };
    this.turnovers = {
      'value' : _arg.turnovers,
      'ranking' : null
    };
    this.reg_season_win_percentage = {
      'value' : _arg.reg_season_win_percentage,
      'ranking' : null
    };
    this.wins = {
      'value' : _arg.wins,
      'ranking' : null
    };
    this.total_regular_season_tds = {
      'value' : _arg.total_regular_season_tds,
      'ranking' : null
    };
    this.playoff_win_percentage = {
      'value' : _arg.playoff_win_percentage,
      'ranking' : null
    };
    this.total_playoff_games = {
      'value' : _arg.total_playoff_games,
      'ranking' : null
    };
    this.yards_per_game = {
      'value' : _arg.yards_per_game,
      'ranking' : null
    };
    this.qb_rating = {
      'value' : _arg.qb_rating,
      'ranking' : null
    };
    this.total_mvp_awards = {
      'value' : _arg.total_mvp_awards,
      'ranking' : null
    };
    this.overall = null;

    this.id = _incrementIndex();
  };
  Qb.prototype.determine_score = function () {
  };

  var _incrementIndex = function () {
    return qb_index++;
  };

  var _toggleRanked = function () {
    ranked = !ranked;
  };
  var _resetQbRanking = function () {
    ranked = false;
  };
  var _qbsRanked = function () {
    ranked = true;
  };
  var _rankQbBy = function (_prop, lowestToHighest) {
    lowestToHighest |= false;
    var _qbs = qbs;
    _qbs.sort(function(a,b) {
      return lowestToHighest ? parseFloat(b[_prop].value) - parseFloat(a[_prop].value) : parseFloat(a[_prop].value) - parseFloat(b[_prop].value);
    });
    return _qbs;
  };
  var _rankQbs = function () {
    overall['sb_titles'] = _rankQbBy('sb_titles');
    overall['sb_appearances'] = _rankQbBy('sb_appearances', true);
    overall['total_offense'] = _rankQbBy('total_offense', true);
    overall['turnovers'] = _rankQbBy('turnovers');
    overall['reg_season_win_percentage'] = _rankQbBy('reg_season_win_percentage', true);
    overall['wins'] = _rankQbBy('wins', true);
    overall['total_regular_season_tds'] = _rankQbBy('total_regular_season_tds', true);
    overall['playoff_win_percentage'] = _rankQbBy('playoff_win_percentage');
    overall['total_playoff_games'] = _rankQbBy('total_playoff_games', true);
    overall['yards_per_game'] = _rankQbBy('yards_per_game', true);
    overall['qb_rating'] = _rankQbBy('qb_rating', true);
    console.log(overall);
  };
  var _addQb = function(_qb) {
    var qb = new Qb(_qb);
    qbs.push(qb);
    _resetQbRanking();
  };

  // public stuffs
  return {
    addQb : function (_data) {
      if (typeof _data === "object" || typeof _data === "array") {
        for (var i = 0; i < _data.length; i++) {
          _addQb(_data[i]);
        }
      }
      else {
        _addQb(_data);
      }
    },
    rankEm : function() {
      _rankQbs();
    },
    //addQbFromJSON : function (_path) {
    //  $.getJSON('/qbs.json', function(data) {
    //    for (var i = 0; i < _data.length; i++) {
    //      _addQb(_data[i]);
    //    }
    //  });
    //},
    logQbs : function () {
      console.log(qbs);
    },
    dumpQbs : function() {
      return qbs;
    }
  };
}());


$("#loadUpQbs").click(function (e) {
  e.preventDefault();
  app.addQb(QBS);
  $(this).attr('disabled','disabled');
});

$("#rankEm").click(function (e) {
  e.preventDefault();
  app.rankEm();
});

$("#logQbs").click(function (e) {
  e.preventDefault();
  app.logQbs();
});

$("#tableEm").click(function (e) {
  e.preventDefault();
  var _qbs = app.dumpQbs();
  for (var i = 0; i < _qbs.length; i++) {
    var _qb_name = _qbs[i].qb_name;
    var _sb_titles = _qbs[i].sb_titles.value;
    var _sb_appearances = _qbs[i].sb_appearances.value;
    var _total_offense = _qbs[i].total_offense.value;
    var _turnovers = _qbs[i].turnovers.value;
    var _reg_season_win_percentage = _qbs[i].reg_season_win_percentage.value;
    var _wins = _qbs[i].wins.value;
    var _total_regular_season_tds = _qbs[i].total_regular_season_tds.value;
    var _playoff_win_percentage = _qbs[i].playoff_win_percentage.value;
    var _total_playoff_games = _qbs[i].total_playoff_games.value;
    var _yards_per_game = _qbs[i].yards_per_game.value;
    var _qb_rating = _qbs[i].qb_rating.value;
    var _total_mvp_awards = _qbs[i].total_mvp_awards.value;
    var _string = '<tr>' +
                    '<td>' + _qb_name + '</td>' +
                    '<td>' + _sb_titles + '</td>' +
                    '<td>' + _sb_appearances + '</td>' +
                    '<td>' + _total_offense + '</td>' +
                    '<td>' + _turnovers + '</td>' +
                    '<td>' + _reg_season_win_percentage + '</td>' +
                    '<td>' + _wins + '</td>' +
                    '<td>' + _total_regular_season_tds + '</td>' +
                    '<td>' + _playoff_win_percentage + '</td>' +
                    '<td>' + _total_playoff_games + '</td>' +
                    '<td>' + _yards_per_game + '</td>' +
                    '<td>' + _qb_rating + '</td>' +
                    '<td>' + _total_mvp_awards + '</td>' +
                  '</tr>';
    $("#quarterback-table").append(_string);
  }
});




































